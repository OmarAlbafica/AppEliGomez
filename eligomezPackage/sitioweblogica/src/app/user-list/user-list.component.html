


<div class="px-4 py-3 flex items-center justify-between">
  <label class="flex flex-col min-w-40 h-12 w-full">
    <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
      <div
        class="text-[#637588] flex border-none bg-[#f0f2f4] items-center justify-center pl-4 rounded-l-xl border-r-0"
        data-icon="MagnifyingGlass"
        data-size="24px"
        data-weight="regular"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
          <path
            d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
          ></path>
        </svg>
      </div>
      <input
        placeholder="Buscar usuario por nombre o correo electrónico"
        class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#111418] focus:outline-0 focus:ring-0 border-none bg-[#f0f2f4] focus:border-none h-full placeholder:text-[#637588] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal"
        [(ngModel)]="searchText"
        (ngModelChange)="onSearchChange($event)"
      />
    </div>
  </label>
  <button
    class="h-12 px-6 font-semibold text-white rounded-lg shadow-md"
    style="background:#10b981; margin-left:2rem; min-width:160px;"
    (click)="router.navigate(['/main/create-user'])"
    onmouseover="this.style.background='#059669'" onmouseout="this.style.background='#10b981'"
  >
    Agregar usuario
  </button>
</div>

<div class="px-4 py-3">
  <div class="flex overflow-hidden rounded-xl border border-[#dce0e5] bg-white dark:bg-gray-800">
    <table class="flex-1">
      <thead>
        <tr class="bg-white dark:bg-gray-800">
          <th class="px-4 py-3 text-left text-[#111418] w-[500px] text-sm font-medium leading-normal">
            Nombre
            <button (click)="toggleSort('Name')" class="ml-2 text-[#555] hover:text-[#777]">↕</button>
          </th>
          <th class="px-4 py-3 text-left text-[#111418] w-[500px] text-sm font-medium leading-normal">
            Correo Electrónico
            <button (click)="toggleSort('Email')" class="ml-2 text-[#555] hover:text-[#777]">↕</button>
          </th>
          <th class="px-4 py-3 text-left text-[#111418] w-60 text-sm font-medium leading-normal">Opciones</th>
        </tr>
      </thead>
      <tbody *ngIf="filteredUsers.length > 0; else noUsers">
        <tr *ngFor="let user of filteredUsers" class="border-t border-t-[#dce0e5]">
          <td class="h-[72px] px-4 py-2 w-[400px] text-[#111418] text-sm font-normal leading-normal">{{ user.Name }}</td>
          <td class="h-[72px] px-4 py-2 w-[400px] text-[#637588] text-sm font-normal leading-normal">{{ user.Email }}</td>
          <td class="h-[72px] px-4 py-2 w-60 text-sm font-normal leading-normal">
            <button
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-8 px-4 bg-[#555] text-white text-sm font-medium leading-normal w-full hover:bg-[#777]"
              (click)="editUser(user)"
            >
              <span class="truncate">Editar</span>
            </button>
            <button
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-8 px-4 bg-[#555] text-white text-sm font-medium leading-normal w-full mt-2 hover:bg-[#777]"
              (click)="confirmDeleteUser(user)"
            >
              <span class="truncate">Eliminar</span>
            </button>
          </td>
        </tr>
      </tbody>
      <ng-template #noUsers>
        <tr>
          <td colspan="3" class="h-64 text-center">
            <p class="text-[#111418] text-lg font-bold leading-normal">No se encontraron resultados para "{{ searchText }}"</p>
          </td>
        </tr>
      </ng-template>
    </table>
  </div>
</div>

<div style="height: 100px;"></div>

<app-confirm-modal
  [showModal]="showModal"
  header="Confirmación"
  message="¿Estás seguro de que deseas eliminar este usuario?"
  (confirm)="deleteUser()"
  (cancel)="cancelDelete()"
></app-confirm-modal>